#!/usr/bin/env bash

if [ -z "$1" ]; then
    # display usage if no parameters given
    echo "Usage: extract <path/file_name>.<zip|rar|bz2|gz|tar|tbz2|tgz|7z|xz|exe|tar.bz2|tar.gz|tar.xz|tar.zst|lzma|pax.Z|Z|dmg|pax>"
else
    if [ -f "$1" ] ; then
        nameInLowerCase=$(echo "$1" | awk '{print tolower($0)}')
        case "$nameInLowerCase" in
            *.tar.bz2)   tar xvjf ./"$1"                               ;;
            *.tar.gz)    tar xvzf ./"$1"                               ;;
            *.tar.xz)    tar xvJf ./"$1"                               ;;
            *.tar.zst)   tar --zstd -xvf ./"$1"                        ;;
            *.lzma)      unlzma ./"$1"                                 ;;
            *.bz2)       bunzip2 ./"$1"                                ;;
            *.rar)       unrar x -ad ./"$1"                            ;;
            *.gz)        gunzip ./"$1"                                 ;;
            *.tar)       tar xvf ./"$1"                                ;;
            *.tbz2)      tar xvjf ./"$1"                               ;;
            *.tgz)       tar xvzf ./"$1"                               ;;
            *.zip)       unzip ./"$1"                                  ;;
            *.pax.Z)     uncompress ./"$1" --stdout | pax-r            ;;
            *.Z)         uncompress ./"$1"                             ;;
            *.7z)        7z x ./"$1"                                   ;;
            *.xz)        unxz ./"$1"                                   ;;
            *.exe)       cabextract ./"$1"                             ;;
            *.dmg)       hdiutil mount ./"$1"                          ;;
            *.pax)       cat ./"$1" | pax-r                            ;;
            *)           echo "extract: '$1' - unknown archive method" ;;
        esac
    else
        echo "'$1' - file does not exist"
    fi
fi
